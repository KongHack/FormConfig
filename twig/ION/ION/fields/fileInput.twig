{% macro render(field) %}
    <ion-ripple-effect></ion-ripple-effect>
    <ion-text id="file-name-{{ field.getName() }}"></ion-text>
    <ion-icon mode="ios" name="arrow-forward"></ion-icon>

    <script>
        $(document).on('click.file_input-{{ pid }}', "#item-{{ field.getName() }}", function() {
            window.chooser.getFile()
                .then(function(success) {
                    window.ACE.__FORMS.fields["{{ field.getName() }}"] = JSON.stringify({
                        'name': success.name,
                        'data': success.dataURI.substr(success.dataURI.indexOf(',')+1),
                        'extension': success.name.substr(success.name.lastIndexOf('.'))
                    });
                    $("#file-name-{{ field.getName() }}").text(success.name);
                    window.ACE.__FORMS.allowSave();
                })
                .catch(function(reason) {
                    // User canceled
                });
        });
    </script>
{% endmacro %}